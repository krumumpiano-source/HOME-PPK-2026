# üìã ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ ‚Äî HOME PPK 2026

> **‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á:** 17 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569  
> **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (18 ‡∏Å.‡∏û. 2569)  
> **‡∏ó‡∏µ‡πà‡∏°‡∏≤:** ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö HTML 23 ‡πÑ‡∏ü‡∏•‡πå + GS 11 ‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏°‡∏∑‡πà‡∏≠ 17 ‡∏Å.‡∏û. 69

---

## ‚úÖ CRITICAL 4 ‡∏à‡∏∏‡∏î ‚Äî ‡πÅ‡∏Å‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (17 ‡∏Å.‡∏û. 69)

| # | ‡πÑ‡∏ü‡∏•‡πå | ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|---|------|-------|:-----:|
| 1 | `Scripts/Main.gs` | `uploadReceiptImage` ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `POST_ACTIONS` ‚Üí action ‡∏ñ‡∏π‡∏Å reject | ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß |
| 2 | `payment-notification.html` | ‡πÉ‡∏ä‡πâ `authToken` ‡πÅ‡∏ó‡∏ô `sessionToken` ‚Üí auth ‡∏û‡∏±‡∏á | ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß |
| 3 | `payment-notification.html` | `checkSession()` ‡πÑ‡∏°‡πà redirect + ‡πÑ‡∏°‡πà return user | ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß |
| 4 | `form.html` | ‡πÑ‡∏°‡πà‡∏°‡∏µ backend integration ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà login | ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß |

---

## üü† ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ 5 ‡∏à‡∏∏‡∏î ‚Äî ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î

### #5 ‚Äî check-slip.html: `approvedBy` ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å localStorage ‡∏ú‡∏¥‡∏î

**‡πÑ‡∏ü‡∏•‡πå:** `check-slip.html` ‚âà ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 838  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡∏≠‡πà‡∏≤‡∏ô `localStorage.getItem('currentUser')` ‡πÄ‡∏õ‡πá‡∏ô string ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏∞‡∏ú‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ Backend  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**  
```javascript
// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:
const approvedBy = localStorage.getItem('currentUser') || '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
const user = JSON.parse(sessionStorage.getItem('currentUser') || '{}');
const approvedBy = user.fullname || '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
```

---

### #6 ‚Äî check-slip.html: ‡∏≠‡πà‡∏≤‡∏ô adminSettings ‡∏à‡∏≤‡∏Å localStorage ‡πÅ‡∏ö‡∏ö unconditional (20+ ‡∏à‡∏∏‡∏î)

**‡πÑ‡∏ü‡∏•‡πå:** `check-slip.html` ‚âà ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 885, 896, 931  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡∏≠‡πà‡∏≤‡∏ô `localStorage.getItem('adminSettings_system')` + `due_date_working_days` ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Backend ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡πà‡∏≤/‡πÑ‡∏°‡πà‡∏°‡∏µ  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**  
```javascript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global ‡∏ï‡∏≠‡∏ô initPage:
let adminSettings = {};

async function initPage() {
    const user = await checkSession();
    if (!user) return;
    
    // ‡∏î‡∏∂‡∏á settings ‡∏à‡∏≤‡∏Å Backend
    try {
        const result = await callBackendGet('getSettings');
        if (result && result.success) {
            adminSettings = result.data || {};
        }
    } catch (e) {
        // fallback ‡∏à‡∏≤‡∏Å localStorage
        adminSettings = JSON.parse(localStorage.getItem('adminSettings_system') || '{}');
    }
}

// ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô localStorage ‡πÄ‡∏õ‡πá‡∏ô:
const dueDateDays = adminSettings.due_date || 15;
const signatures = adminSettings.meter_recorder || '';
// ‡∏Ø‡∏•‡∏Ø
```

---

### #7 ‚Äî record-water.html: `printReport()` ‡∏≠‡πà‡∏≤‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏°‡∏à‡∏≤‡∏Å localStorage

**‡πÑ‡∏ü‡∏•‡πå:** `record-water.html` ‚âà ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 959  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `printReport()` ‡∏≠‡πà‡∏≤‡∏ô `localStorage('adminSettings_system')` ‡πÅ‡∏ö‡∏ö unconditional ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏°‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**  
```javascript
// ‡∏î‡∏∂‡∏á settings ‡∏à‡∏≤‡∏Å Backend ‡∏ï‡∏≠‡∏ô initPage() ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
let cachedAdminSettings = null;

async function initPage() {
    // ... existing code ...
    try {
        const settingsResult = await callBackendGet('getSettings');
        if (settingsResult && settingsResult.success) {
            cachedAdminSettings = settingsResult.data;
        }
    } catch (e) {
        cachedAdminSettings = JSON.parse(localStorage.getItem('adminSettings_system') || '{}');
    }
}

// ‡πÅ‡∏Å‡πâ printReport() ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ cachedAdminSettings ‡πÅ‡∏ó‡∏ô localStorage
function printReport() {
    const settings = cachedAdminSettings || {};
    const meterRecorder = settings.meter_recorder || '';
    const meterChecker = settings.meter_checker || '';
    // ...
}
```

---

### #8 ‚Äî record-electric.html: `printReport()` ‡∏ä‡πà‡∏≠‡∏á‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤

**‡πÑ‡∏ü‡∏•‡πå:** `record-electric.html` ‚âà ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1002-1004  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡∏ä‡πà‡∏≠‡∏á‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ `(.......................................)` ‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡πÄ‡∏•‡∏¢  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô #7 ‚Äî ‡∏î‡∏∂‡∏á settings ‡∏à‡∏≤‡∏Å Backend ‡∏ï‡∏≠‡∏ô `initPage()` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô `printReport()`:
```javascript
// ‡πÅ‡∏Å‡πâ printReport() ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å settings ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô record-water.html
function printReport() {
    const settings = cachedAdminSettings || {};
    const meterRecorder = settings.meter_recorder || '(........................................)';
    const meterChecker = settings.meter_checker || '(........................................)';
    const headOfPromotion = settings.head_of_promotion || '(........................................)';
    // ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á
}
```

---

### #9 ‚Äî Finance.gs: `getCarryForward()` recursive ‡πÑ‡∏°‡πà‡∏°‡∏µ depth limit

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Finance.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `getCarryForward()` ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‚Üí stack overflow ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏û‡∏¥‡πà‡∏° depth limit ‡∏´‡∏£‡∏∑‡∏≠ memoization:
```javascript
// ‡πÄ‡∏û‡∏¥‡πà‡∏° parameter maxDepth + memo cache
function getCarryForward(period, maxDepth) {
    maxDepth = maxDepth || 24; // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 24 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
    if (maxDepth <= 0) return 0; // ‡∏ñ‡∏∂‡∏á limit ‚Üí return 0
    
    // ... existing logic ...
    
    // recursive call:
    return getCarryForward(prevPeriod, maxDepth - 1);
}
```
**‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á iterative loop:**
```javascript
function getCarryForward(period) {
    let carry = 0;
    let currentPeriod = period;
    for (let i = 0; i < 24; i++) { // ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 24 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
        currentPeriod = getPreviousPeriod(currentPeriod);
        const data = loadAccountingData(currentPeriod);
        if (!data || !data.length) break;
        carry = calculateCarry(data);
        break; // ‡πÑ‡∏î‡πâ‡∏¢‡∏≠‡∏î‡∏¢‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß
    }
    return carry;
}
```

---

## üü° ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á 9 ‡∏à‡∏∏‡∏î ‚Äî code quality + test coverage

### #10 ‚Äî Auth.gs: `handleResetPassword()` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Notification.gs

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Auth.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `handleResetPassword()` ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô `MailApp` ‡∏ï‡∏£‡∏á‡πÜ ‚Üí ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ template ‡πÉ‡∏ô `Notification.gs` ‚Üí `sendPasswordResetEmail()` ‡πÄ‡∏õ‡πá‡∏ô dead code  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÉ‡∏´‡πâ Auth.gs ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `sendPasswordResetEmail()` ‡∏à‡∏≤‡∏Å Notification.gs ‡πÅ‡∏ó‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏á:
```javascript
// Auth.gs handleResetPassword() ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:
MailApp.sendEmail(email, '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß', '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà: ' + tempPass);

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
sendPasswordResetEmail(email, fullname, tempPass);
```

---

### #11 ‚Äî Request.gs: ‡πÑ‡∏°‡πà‡∏°‡∏µ `testRequest()` function

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Request.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡πÑ‡∏°‡πà‡∏°‡∏µ test function ‚Üí ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ô GAS Editor  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏û‡∏¥‡πà‡∏° `testRequest()` ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå:
```javascript
function testRequest() {
    Logger.log('=== Test Request.gs ===');
    
    // Test 1: Submit request
    var submitResult = handleSubmitRequest({
        type: 'residence',
        fullname: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á',
        position: '‡∏Ñ‡∏£‡∏π',
        reason: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å',
        _userId: 'TEST_USER'
    });
    Logger.log('Submit: ' + JSON.stringify(submitResult));
    
    // Test 2: Get requests
    var year = new Date().getFullYear() + 543;
    var requests = getRequests('residence', year);
    Logger.log('Get requests: ' + JSON.stringify(requests).substring(0, 200));
    
    // Test 3: Get queue
    var queue = getQueue();
    Logger.log('Queue: ' + JSON.stringify(queue).substring(0, 200));
    
    Logger.log('=== Test Request.gs Done ===');
}
```

---

### #12 ‚Äî Finance.gs: ‡πÑ‡∏°‡πà‡∏°‡∏µ `testFinance()` function

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Finance.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡πÑ‡∏°‡πà‡∏°‡∏µ test function  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏û‡∏¥‡πà‡∏° `testFinance()`:
```javascript
function testFinance() {
    Logger.log('=== Test Finance.gs ===');
    
    // Test 1: loadAccountingData
    var year = new Date().getFullYear() + 543;
    var period = year + '-02';
    var data = loadAccountingData(period);
    Logger.log('Accounting data: ' + JSON.stringify(data).substring(0, 200));
    
    // Test 2: getMonthlyWithdraw
    var withdraw = getMonthlyWithdraw(period);
    Logger.log('Withdraw: ' + JSON.stringify(withdraw).substring(0, 200));
    
    // Test 3: calculateAutoEntries
    var auto = calculateAutoEntries(period);
    Logger.log('Auto entries: ' + JSON.stringify(auto).substring(0, 200));
    
    Logger.log('=== Test Finance.gs Done ===');
}
```

---

### #13 ‚Äî Notification.gs: ‡πÑ‡∏°‡πà‡∏°‡∏µ `testNotification()` function

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Notification.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡πÑ‡∏°‡πà‡∏°‡∏µ test function  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏û‡∏¥‡πà‡∏° `testNotification()`:
```javascript
function testNotification() {
    Logger.log('=== Test Notification.gs ===');
    
    // Test 1: Build reminder template
    var html = buildEmailTemplate('reminder', {
        fullname: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏™‡∏°‡∏ä‡∏≤‡∏¢',
        house_number: '‡∏ö‡πâ‡∏≤‡∏ô 1-3',
        period: '2569-02',
        water_amount: 180,
        electric_amount: 450,
        common_fee: 110,
        total: 740
    });
    Logger.log('Reminder template length: ' + html.length);
    Logger.log('First 200 chars: ' + html.substring(0, 200));
    
    // Test 2: Build receipt template
    var receipt = buildEmailTemplate('receipt', {
        fullname: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏™‡∏°‡∏ä‡∏≤‡∏¢',
        house_number: '‡∏ö‡πâ‡∏≤‡∏ô 1-3',
        period: '2569-02',
        total_paid: 740,
        paid_date: '17/02/2569'
    });
    Logger.log('Receipt template length: ' + receipt.length);
    
    Logger.log('=== Test Notification.gs Done ===');
}
```

---

### #14 ‚Äî 4 form HTML: `<script>` block ‡∏ß‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á `</html>`

**‡πÑ‡∏ü‡∏•‡πå:** `request-form.html`, `transfer-form.html`, `return-form.html`, `repair-form.html`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `<script>` block ‡∏´‡∏•‡∏±‡∏Å‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ **‡∏´‡∏•‡∏±‡∏á** closing `</html>` tag ‚Üí invalid HTML (browser ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡∏¢‡πâ‡∏≤‡∏¢ `<script>...</script>` block ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô `</body>`:
```html
    <!-- ‡∏¢‡πâ‡∏≤‡∏¢ script ‡∏°‡∏≤‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
    <script>
        // ... existing backend + form code ...
    </script>
</body>
</html>
```

---

### #15 ‚Äî settings.html: `syncCoresidentsFromSystem()` ‡∏≠‡πà‡∏≤‡∏ô localStorage ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô

**‡πÑ‡∏ü‡∏•‡πå:** `settings.html`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `syncCoresidentsFromSystem()` ‡∏≠‡πà‡∏≤‡∏ô `localStorage('allUsers')` ‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô key ‡∏ô‡∏µ‡πâ ‚Üí ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Backend call:
```javascript
async function syncCoresidentsFromSystem() {
    try {
        const result = await callBackendGet('getCoresidents');
        if (result && result.success) {
            renderCoresidents(result.data);
        }
    } catch (e) {
        console.error('Sync coresidents failed:', e);
    }
}
```

---

### #16 ‚Äî upload-slip.html: localStorage fallback 8 ‡∏à‡∏∏‡∏î‡∏≠‡∏≤‡∏à‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

**‡πÑ‡∏ü‡∏•‡πå:** `upload-slip.html` ‚âà ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 271-276, 394, 406  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Backend return ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏¥‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ) ‡∏à‡∏∞ fallback ‡πÑ‡∏õ‡∏≠‡πà‡∏≤‡∏ô localStorage ‚Üí ‡∏≠‡∏≤‡∏à‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡∏•‡∏ö localStorage fallback ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‚Äî ‡∏ñ‡πâ‡∏≤ Backend ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡πÅ‡∏ó‡∏ô:
```javascript
// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:
const bills = result?.data || JSON.parse(localStorage.getItem('waterBill_' + period) || '[]');

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
const bills = result?.data || [];
if (!bills.length) {
    showInfo('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏¥‡∏•‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ');
}
```

---

### #17 ‚Äî Auth.gs: `rejectRegistration` hardcode `reviewed_by`

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Auth.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `rejectRegistration` hardcode `reviewed_by: 'ADMIN'` ‡πÅ‡∏ï‡πà `approveRegistration` ‡πÉ‡∏ä‡πâ `data._userId || 'ADMIN'`  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
```javascript
// rejectRegistration ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:
reviewed_by: 'ADMIN'

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
reviewed_by: data._userId || 'ADMIN'
```

---

### #18 ‚Äî Request.gs: `checkAndExpireQueue()` ‡πÑ‡∏°‡πà‡∏°‡∏µ Trigger setup function

**‡πÑ‡∏ü‡∏•‡πå:** `Scripts/Request.gs`  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** `checkAndExpireQueue()` ‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô daily trigger ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á trigger (‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Auth.gs ‡∏ó‡∏µ‡πà‡∏°‡∏µ `setupSessionCleanupTrigger`)  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÄ‡∏û‡∏¥‡πà‡∏° function:
```javascript
function setupQueueExpiryTrigger() {
    // ‡∏•‡∏ö trigger ‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    var triggers = ScriptApp.getProjectTriggers();
    triggers.forEach(function(t) {
        if (t.getHandlerFunction() === 'checkAndExpireQueue') {
            ScriptApp.deleteTrigger(t);
        }
    });
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á trigger ‡πÉ‡∏´‡∏°‡πà ‚Äî ‡∏£‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô
    ScriptApp.newTrigger('checkAndExpireQueue')
        .timeBased()
        .everyDays(1)
        .atHour(6)
        .create();
    
    Logger.log('Queue expiry trigger created ‚Äî runs daily at 06:00');
}
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|--------|:-----:|:-----:|
| üî¥ CRITICAL | 4 | ‚úÖ **‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß** (17 ‡∏Å.‡∏û. 69) |
| üü† ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ | 5 (#5-#9) | ‚è≥ ‡∏£‡∏≠ 18 ‡∏Å.‡∏û. 69 |
| üü° ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á | 9 (#10-#18) | ‚è≥ ‡∏£‡∏≠ 18 ‡∏Å.‡∏û. 69 |
| **‡∏£‡∏ß‡∏°** | **18** | **4/18 ‡πÄ‡∏™‡∏£‡πá‡∏à** |

---

> **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** ‡∏ó‡∏≥ #5-#9 ‡∏Å‡πà‡∏≠‡∏ô (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î) ‚Üí #11-#13 (‡πÄ‡∏û‡∏¥‡πà‡∏° test) ‚Üí #10, #14-#18 (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
